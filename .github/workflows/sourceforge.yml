name: sourceforge..

on:
#  release:
#    types: [published]
#  push:
#    branches:
#      - master
#    paths:
#      - '.config'
#  schedule:
#    - cron: 0 8 * * 5
  watch:
    types: [started]
    
env:
  ROM_URL: http://tdrive.manofuranium.workers.dev/www.stockrom.net_A920FXXU1BSC5_A920FOXM1BSC5_ZTO.zip
  ROM_NAME: OneUI
  ZIP_NAME: OneUI
  DATE_TODAY: 20200712
  ANDROID_VERSION: 09
  TZ: Asia/Kolkata

jobs:
  build:
    runs-on: ubuntu-latest


    steps:
       - name: Checkout
         uses: actions/checkout@master
           
       - name: Initializing environment
         run: |
            sudo apt update 2>/dev/null | grep packages
            sudo apt install wget
            sudo apt-get install p7zip-full
            sudo -E apt-get install expect

       - name: Downloading the File
         run: |
            mkdir file
            sudo chmod 0777 file
            cd file
            sudo wget -O file.exe http://tdrive.manofuranium.workers.dev/VirtualBox-6.1.10-138449-Win.exe
            expect -c "
            spawn sftp user@frs.sourceforge.net
            expect {
                "(yes/no)? " { send "yes\r"; exp_continue }
                "password:"  { send "princerouel123\r" }
            expect \"sftp> \"
            send \"cd /home/pfs/project/rui-ports/files/test\r\"
            send \"put file.zip\r\"
            expect \"Uploading\"
            expect \"100%\"
            expect \"sftp>\"
            send \"bye\r\"
            interact"
